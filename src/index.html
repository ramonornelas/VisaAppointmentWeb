<!DOCTYPE html>
<html>
<head>
    <title>Visa Appointment Search</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <br>
    <select id="user-select" class="big-centered-dropdown">
        <option value="Unknown">(Select user)</option>
        <option value="Sol">Sol</option>
        <option value="Xavier">Xavier</option>
        <option value="Carlos">Carlos</option>
        <option value="Ramon">Ramon</option>
    </select>
    <br>
    <div id="city-buttons" class="center-buttons"></div>
    <script src="functions.js"></script>
    <script>
        var cityNames = {
            65: "Ciudad Juarez",
            66: "Guadalajara",
            67: "Hermosillo",
            68: "Matamoros",
            69: "Merida",
            70: "Mexico City",
            71: "Monterrey",
            72: "Nogales",
            73: "Nuevo Laredo",
            74: "Tijuana"
        };

        var cityButtons = document.getElementById("city-buttons");

        function createButton(cityId, cityName) {
            var button = document.createElement("button");
            button.textContent = cityName;
            button.className = "large-button";
            button.onclick = function() {
                searchCity(cityId).then(result => {
                    button.textContent = result;
                    // Change the color based on the result
                    if (result.includes("AVAILABLE DATE!!!")) {
                        button.style.backgroundColor = "green";
                    } else if (result.includes("No dates available.")) {
                        button.style.backgroundColor = "yellow";
                    } else if (result.includes("First available date:")) {
                        button.style.backgroundColor = "blue";
                    } else if (result.includes("error")) {
                        button.style.backgroundColor = "red";
                    } else {
                        button.style.backgroundColor = "gray";
                    }
                });
            };
            return button;
        }

        for (var cityId in cityNames) {
            var cityName = cityNames[cityId];
            var button = createButton(cityId, cityName);
            cityButtons.appendChild(button);

            // Add two break elements after each button
            var br1 = document.createElement("br");
            //var br2 = document.createElement("br");
            cityButtons.appendChild(br1);
            //cityButtons.appendChild(br2);
        }
    </script>
</body>
</html>